<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0085FF">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="components/dockbar.css">
    <link rel="stylesheet" href="components/avedrive.css">
    <link rel="stylesheet" href="components/toast.css">
    <link rel="stylesheet" href="animate.css">
    <link rel="stylesheet" href="https://unpkg.com/placeholder-loading/dist/css/placeholder-loading.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="js/toast.js"></script>
    <title>Ave Diary</title>
</head>

<body>
    <nav class="dockbar" id="dock">
        <a class="dochome docbtn pagechange" href="index.html"><i class="material-icons">home</i></a>
        <a class="doclist docbtn pagechange" href="tasklist.html"><i class="material-icons">format_list_bulleted</i></a>
        <a class="docstudents docbtn pagechange" href="students.html"><i class="material-icons">people</i></a>
        <a class="docsettings docbtn pagechange" href="settings.html"><i class="material-icons">settings</i></a>

    </nav>
    <h1 id="project-header"><a class="pagechange header-text" href="index.html">Ave Diary</a></h1>
    <div class="animated homepage page-animation fadeInUp faster">
        <article class="block">
            <div class="hometask">
                <h3>Домашнее задание на завтра: <a href="adddz.html" class="addtask pagechange"><i
                            class="material-icons">
                            add
                        </i></a></h3>
                <p class="task">Алгебра: 3.195 3.194(а,б) 3.195(а,б)</p>
                <p class="task">Русская литература: Гоголь Шинель читать</p>
                <p class="task">Химия: p26</p>
                <p class="task">История: p35 з.7</p>
                <p class="task">Биология: p30</p>
            </div>
            <div class="schedule">
                <h3>Расписание на завтра: <a class="addtask"><i class="material-icons">
                            edit
                        </i></a></h3>
                <p class="lesson">1. Алгебра</p>
                <p class="lesson">2. Русская литература</p>
                <p class="lesson">3. Химия</p>
                <p class="lesson">4. История</p>
                <p class="lesson">5. Биология</p>
            </div>
            <div class="school-info">
                <p>Беларусь, Вiцебск, Сярэдняя школа нумар 46 горада Вiцебска, 9-Б</p>
            </div>
        </article>
        <article class="ave_drive block">
            <h3>Ave Drive | 110.2мб / 1024мб</h3>
            <progress max="100" value="30"></progress>
            <figure class="file-field" id="file-field">
                <div class="file-block" id="fileblock1">
                    <figure class="file-icon file-type-txt">
                        .txt
                    </figure>
                    <a>
                        <div class="file-name">
                            Список задач.txt
                        </div>
                        <div class="file-autor">
                            Александр Маркелов | 10кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('0')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-doc">
                        .doc
                    </figure>
                    <a>
                        <div class="file-name">
                            Политическая система Беларуси.doc
                        </div>
                        <div class="file-autor">
                            Виталий Игнатенко | 163кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('1')"><i class="material-icons">delete</i></a>
                </div>

                <div class="file-block">
                    <figure class="file-icon file-type-ppt">
                        .ppt
                    </figure>
                    <a>
                        <div class="file-name">
                            Оксиды.ppt
                        </div>
                        <div class="file-autor">
                            Егор Шевцов | 216кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('2')"><i class="material-icons">delete</i></a>
                </div>


                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('3')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('4')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('5')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('6')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('7')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('8')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('9')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('10')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('11')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('12')"><i class="material-icons">delete</i></a>
                </div>
                <div class="file-block">
                    <figure class="file-icon file-type-xls">
                        .xls
                    </figure>
                    <a>
                        <div class="file-name">
                            График дежурств.xls
                        </div>
                        <div class="file-autor">
                            Данченко Ростислав | 27кб
                        </div>
                        <div class="file-time">
                            04.01.2020 20:02
                        </div>
                    </a>
                    <a class="deletebtn" onclick="deleteblock('13')"><i class="material-icons">delete</i></a>
                </div>
            </figure>
            <a href="addfile.html">
                <p class="file-add">Добавить файл</p>
            </a>
        </article>
    </div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    setTimeout(() => $(".homepage").removeClass("animated"), 500);
    var fileblocks = document.getElementsByClassName("file-block");
    var fileblockscounter = fileblocks.length;
    if (fileblockscounter < 1) {
        document.getElementById("file-field").insertAdjacentHTML("afterbegin", "<p class='empty'>Тут пока пусто</p>");
    }

    var deliting = false;
    var t1 = 700; // | Задержка перед удалением анимации вибрации
    var t2 = 500; // | Задержка после удаления анимации вибрации
    var t3 = 400; // | Задержка перед удалением файла
    var t4 = 2000; // | Задержка перед появлением дока
    var t5 = t1 + t2 + t3 + t4 + 200; // Защита от нажатия
    var t6 = 1500; // | Задержка перед спружиниванием мусорки
    var t7 = 600; // | Задержка для удаления спружинивания мусорки
    var t8 = 3500; // | Задержка перед исчезовением мусорки
    var t9 = 200; // | Задержка перед удалением мусорки
    function deleteblock(a) {
        if (deliting == false) { // Защита от нажатия
            deliting = true;
            var deletebtns = document.getElementsByClassName("deletebtn"); // Поиск кнопок удалить
            for (var i = 0; i < deletebtns.length; i++) {
                deletebtns[i].style.opacity = 0.7; // Прозрачность кнопок удалить
            }

            document.body.insertAdjacentHTML("beforeend",
                `<div class="trash customfadeInUp"><div><span class='material-icons'>delete</span> Удалено!</div><a>Отмена</a></div> `
            ); // Создание мусорки
            setTimeout(function () { // Задержка перед спружиниванием
                $(".trash").addClass("shaketrash"); // Добавление класса спружинивания
                $(".trash").removeClass(
                    "customfadeInUp"); // Удаление класса появления мусорки (Чтобы не было конфликтов)
                setTimeout(function () { // Задержка для удаления спружинивания
                    $(".trash").removeClass(
                        "shaketrash"); // Удаление спружинивания (Чтобы не было конфликтов)
                }, t7)
            }, t6);

            setTimeout(function () { // Задержка перед исчезновением мусорки
                $(".trash").addClass("customfadeOutDown"); // Исчезновение мусорки
                setTimeout(function () { // Задержка перед удалением мусорки
                    $(".trash").remove(); // Удаление мусорки
                }, 200);
            }, t8);

            $(".dockbar").addClass("customfadeOutDown"); // Исчезновение докбара
            fileblocks[a].classList.add("shakefile"); // Вибрация файла

            setTimeout(function () {
                navigator.vibrate(25);
                setTimeout(function () {
                    navigator.vibrate(25);
                    setTimeout(function () {
                        navigator.vibrate(25);
                    }, 100);
                }, 100);
            }, 100);
            setTimeout(function () { // Задержка перед удалением анимации вибрации
                fileblocks[a].classList.remove("shakefile"); // Удаление анимации вибрации
                setTimeout(function () { // Задержка после анимации вибрации
                    fileblocks[a].insertAdjacentHTML("beforebegin",
                        "<div class='fileclone'></div>"); // Создание клона
                    var fileblockpos = fileblocks[a]
                        .getBoundingClientRect(); // Переменная с позицией файла
                    fileblocks[a].style.bottom = screen.height - fileblockpos.y - 90.4 +
                        "px"; // Задана стартовая позиция
                    fileblocks[a].classList.add("fileblockdeleted"); // Анимаци падения
                    setTimeout(function () { // Задержка перед удалением файла 
                        fileblocks[a].classList.add("fileblockdeletedend");
                        navigator.vibrate(50);

                        setTimeout(function () { // Задержка перед исчезновением мусорки
                            fileblockscounter--; // Счётчик файлов --
                            $(".dockbar").removeClass(
                            "customfadeOutDown"); // Удаление анимации у докбара (Чтобы не было конфликтов)
                            $(".dockbar").addClass(
                            "customfadeInUp"); // Добавление анимации докбару
                            if (fileblockscounter <
                                1) { // Проверка на количество блоков
                                document.getElementById("file-field")
                                    .insertAdjacentHTML(
                                        "afterbegin",
                                        "<p class='empty'>Тут пока пусто</p>");
                            }
                        }, t4);
                    }, t3);
                }, t2);
            }, t1);
            setTimeout(function () { // Снятие защиты от нажатия
                deliting = false;
                for (var i = 0; i < deletebtns.length; i++) {
                    deletebtns[i].style.opacity = 1;
                }
            }, t5);
        }
    }
</script>
<script>
    $(".dochome").addClass("active");

    if (screen.width >= 768) {
        $(".page-animation").removeClass("fadeInUp");
        $(".page-animation").addClass("fadeInLeft");
    }

    $(document).ready(function () {

        $(function () {
            var flag = new Boolean(true); // Защитит от частого нажатия на кнопку

            // Клик
            $('.pagechange').click(function (e) {
                openUrl($(this));
                e.preventDefault();
            })

            /**
             * Открывает ссылку с задержкой
             * 
             * @param {object} a - Нажатая кнопка
             * @return {boolean}
             */
            function openUrl(a) {
                var delay = 350, // Задержка 0.25 секунд
                    uri = a.attr('href'); // URL

                // Проверяем не начата ли загрузка какой-либо ссылки
                if (flag == true) {
                    flag = false;

                    // Добавляем анимации
                    $(".dochome").removeClass("active");
                    $(".docstudents").removeClass("active");
                    $(".docsettings").removeClass("active");
                    $(".doclist").removeClass("active");
                    $(".page-animation").removeClass("fadeInUp");
                    $(".page-animation").addClass("fadeOutDown");
                    $(".animated-btns").addClass("fadeOut");

                    // С задержкой открываем URL, возвращая штатный текст кнопке, разрешаем открывать новые ссылки
                    setTimeout(function () {
                        flag = true;

                        // Проверяем открыть ссылку в новом окне или в текущем

                        window.location = uri;
                        return;

                    }, delay);
                }

                return;
            }

        });

    });
</script>

</html>